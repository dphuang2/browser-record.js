!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.br=e():t.br=e()}(this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){t.exports=n(6)},function(t,e){function n(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function s(t){n(a,o,i,s,c,"next",t)}function c(t){n(a,o,i,s,c,"throw",t)}s(void 0)})}}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(7),o=n(8);t.exports=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[i+s]=a[s];return e||o(a)}},function(t,e,n){var r=n(9),o=n(10),i=n(11);t.exports=function(t){return r(t)||o(t)||i()}},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r=l;return function(o,i){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var c=u(t,e,n);if("normal"===c.type){if(r=n.done?p:f,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l="suspendedStart",f="suspendedYield",d="executing",p="completed",h={};function m(){}function v(){}function y(){}var g={};g[i]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(k([])));w&&w!==n&&r.call(w,i)&&(g=w);var x=y.prototype=m.prototype=Object.create(g);function E(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function T(t){var e;this._invoke=function(n,o){function i(){return new Promise(function(e,i){!function e(n,o,i,a){var s=u(t[n],t,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(l).then(function(t){c.value=t,i(c)},function(t){return e("throw",t,i,a)})}a(s.arg)}(n,o,e,i)})}return e=e?e.then(i,i):i()}}function C(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=u(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function k(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:L}}function L(){return{value:e,done:!0}}return v.prototype=x.constructor=y,y.constructor=v,y[s]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(T.prototype),T.prototype[a]=function(){return this},t.AsyncIterator=T,t.async=function(e,n,r,o){var i=new T(c(e,n,r,o));return t.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},E(x),x[s]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=k,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,o=n;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,n){"use strict";n.r(e);var r,o=n(0),i=n.n(o),a=n(1),s=n.n(a),c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(r||(r={}));var u=1;function l(t){try{var e=t.rules||t.cssRules;return e?Array.from(e).reduce(function(t,e){return t+(function(t){return"styleSheet"in t}(n=e)?l(n.styleSheet)||"":n.cssText);var n},""):null}catch(t){return null}}var f=/url\((?:'([^']*)'|"([^"]*)"|([^)]*))\)/gm,d=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/).*/,p=/^(data:)([\w\/\+]+);(charset=[\w-]+|base64).*,(.*)/gi;function h(t,e){return t.replace(f,function(t,n,r,o){var i,a=n||r||o;if(!a)return t;if(!d.test(a))return"url('"+a+"')";if(p.test(a))return"url("+a+")";if("/"===a[0])return"url('"+(((i=e).indexOf("//")>-1?i.split("/").slice(0,3).join("/"):i.split("/")[0]).split("?")[0]+a)+"')";var s=e.split("/"),c=a.split("/");s.pop();for(var u=0,l=c;u<l.length;u++){var f=l[u];"."!==f&&(".."===f?s.pop():s.push(f))}return"url('"+s.join("/")+"')"})}function m(t,e){var n=t.createElement("a");return n.href=e,n.href}function v(t,e,n,o,i,a,s){void 0===i&&(i=!1),void 0===a&&(a=!0),void 0===s&&(s=!1);var c,f=function(t,e,n,o,i){switch(t.nodeType){case t.DOCUMENT_NODE:return{type:r.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:r.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId};case t.ELEMENT_NODE:var a=!1;"string"==typeof n?a=t.classList.contains(n):t.classList.forEach(function(t){n.test(t)&&(a=!0)});for(var s=t.tagName.toLowerCase(),c={},u=0,f=Array.from(t.attributes);u<f.length;u++){var d=f[u],p=d.name,v=d.value;c[p]="src"===p||"href"===p?m(e,v):"style"===p?h(v,location.href):v}if("link"===s&&o){var y,g=Array.from(e.styleSheets).find(function(e){return e.href===t.href});(y=l(g))&&(delete c.rel,delete c.href,c._cssText=h(y,g.href))}if("style"===s&&t.sheet&&!(t.innerText||t.textContent||"").trim().length&&(y=l(t.sheet))&&(c._cssText=h(y,location.href)),"input"!==s&&"textarea"!==s&&"select"!==s||(v=t.value,"radio"!==c.type&&"checkbox"!==c.type&&v?c.value=i?"*".repeat(v.length):v:t.checked&&(c.checked=t.checked)),"option"===s){var b=t.parentElement;c.value===b.value&&(c.selected=t.selected)}if(a){var w=t.getBoundingClientRect(),x=w.width,E=w.height;c.rr_width=x+"px",c.rr_height=E+"px"}return{type:r.Element,tagName:s,attributes:c,childNodes:[],isSVG:(I=t,"svg"===I.tagName||I instanceof SVGElement||void 0),needBlock:a};case t.TEXT_NODE:var T=t.parentNode&&t.parentNode.tagName,C=t.textContent,N="STYLE"===T||void 0;return N&&C&&(C=h(C,location.href)),"SCRIPT"===T&&(C="SCRIPT_PLACEHOLDER"),{type:r.Text,textContent:C||"",isStyle:N};case t.CDATA_SECTION_NODE:return{type:r.CDATA,textContent:""};case t.COMMENT_NODE:return{type:r.Comment,textContent:t.textContent||""};default:return!1}var I}(t,e,o,a,s);if(!f)return console.warn(t,"not serialized"),null;c="__sn"in t?t.__sn.id:u++;var d=Object.assign(f,{id:c});t.__sn=d,n[c]=t;var p=!i;if(d.type===r.Element&&(p=p&&!d.needBlock,delete d.needBlock),(d.type===r.Document||d.type===r.Element)&&p)for(var y=0,g=Array.from(t.childNodes);y<g.length;y++){var b=v(g[y],e,n,o,i,a,s);b&&d.childNodes.push(b)}return d}var y=/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//g;function g(t,e){void 0===e&&(e={});var n=1,r=1;function o(t){var e=t.match(/\n/g);e&&(n+=e.length);var o=t.lastIndexOf("\n");r=-1===o?r+t.length:t.length-o}function i(){var t={line:n,column:r};return function(e){return e.position=new a(t),p(),e}}var a=function(t){this.start=t,this.end={line:n,column:r},this.source=e.source};a.prototype.content=t;var s=[];function c(o){var i=new Error(e.source+":"+n+":"+r+": "+o);if(i.reason=o,i.filename=e.source,i.line=n,i.column=r,i.source=t,!e.silent)throw i;s.push(i)}function u(){return d(/^{\s*/)}function l(){return d(/^}/)}function f(){var e,n=[];for(p(),h(n);t.length&&"}"!==t.charAt(0)&&(e=S()||k());)!1!==e&&(n.push(e),h(n));return n}function d(e){var n=e.exec(t);if(n){var r=n[0];return o(r),t=t.slice(r.length),n}}function p(){d(/^\s*/)}function h(t){var e;for(void 0===t&&(t=[]);e=m();)!1!==e&&t.push(e),e=m();return t}function m(){var e=i();if("/"===t.charAt(0)&&"*"===t.charAt(1)){for(var n=2;""!==t.charAt(n)&&("*"!==t.charAt(n)||"/"!==t.charAt(n+1));)++n;if(n+=2,""===t.charAt(n-1))return c("End of comment missing");var a=t.slice(2,n-2);return r+=2,o(a),t=t.slice(n),r+=2,e({type:"comment",comment:a})}}function v(){var t=d(/^([^{]+)/);if(t)return b(t[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(t){return t.replace(/,/g,"‌")}).split(/\s*(?![^(]*\)),\s*/).map(function(t){return t.replace(/\u200C/g,",")})}function g(){var t=i(),e=d(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(e){var n=b(e[0]);if(!d(/^:\s*/))return c("property missing ':'");var r=d(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),o=t({type:"declaration",property:n.replace(y,""),value:r?b(r[0]).replace(y,""):""});return d(/^[;\s]*/),o}}function w(){var t,e=[];if(!u())return c("missing '{'");for(h(e);t=g();)!1!==t&&(e.push(t),h(e)),t=g();return l()?e:c("missing '}'")}function x(){for(var t,e=[],n=i();t=d(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)e.push(t[1]),d(/^,\s*/);if(e.length)return n({type:"keyframe",values:e,declarations:w()})}var E,T=I("import"),C=I("charset"),N=I("namespace");function I(t){var e=new RegExp("^@"+t+"\\s*([^;]+);");return function(){var n=i(),r=d(e);if(r){var o={type:t};return o[t]=r[1].trim(),n(o)}}}function S(){if("@"===t[0])return function(){var t=i(),e=d(/^@([-\w]+)?keyframes\s*/);if(e){var n=e[1];if(!(e=d(/^([-\w]+)\s*/)))return c("@keyframes missing name");var r,o=e[1];if(!u())return c("@keyframes missing '{'");for(var a=h();r=x();)a.push(r),a=a.concat(h());return l()?t({type:"keyframes",name:o,vendor:n,keyframes:a}):c("@keyframes missing '}'")}}()||function(){var t=i(),e=d(/^@media *([^{]+)/);if(e){var n=b(e[1]);if(!u())return c("@media missing '{'");var r=h().concat(f());return l()?t({type:"media",media:n,rules:r}):c("@media missing '}'")}}()||function(){var t=i(),e=d(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(e)return t({type:"custom-media",name:b(e[1]),media:b(e[2])})}()||function(){var t=i(),e=d(/^@supports *([^{]+)/);if(e){var n=b(e[1]);if(!u())return c("@supports missing '{'");var r=h().concat(f());return l()?t({type:"supports",supports:n,rules:r}):c("@supports missing '}'")}}()||T()||C()||N()||function(){var t=i(),e=d(/^@([-\w]+)?document *([^{]+)/);if(e){var n=b(e[1]),r=b(e[2]);if(!u())return c("@document missing '{'");var o=h().concat(f());return l()?t({type:"document",document:r,vendor:n,rules:o}):c("@document missing '}'")}}()||function(){var t=i();if(d(/^@page */)){var e=v()||[];if(!u())return c("@page missing '{'");for(var n,r=h();n=g();)r.push(n),r=r.concat(h());return l()?t({type:"page",selectors:e,declarations:r}):c("@page missing '}'")}}()||function(){var t=i();if(d(/^@host\s*/)){if(!u())return c("@host missing '{'");var e=h().concat(f());return l()?t({type:"host",rules:e}):c("@host missing '}'")}}()||function(){var t=i();if(d(/^@font-face\s*/)){if(!u())return c("@font-face missing '{'");for(var e,n=h();e=g();)n.push(e),n=n.concat(h());return l()?t({type:"font-face",declarations:n}):c("@font-face missing '}'")}}()}function k(){var t=i(),e=v();return e?(h(),t({type:"rule",selectors:e,declarations:w()})):c("selector missing")}return function t(e,n){var r=e&&"string"==typeof e.type;var o=r?e:n;for(var i=0,a=Object.keys(e);i<a.length;i++){var s=a[i],c=e[s];Array.isArray(c)?c.forEach(function(e){t(e,o)}):c&&"object"==typeof c&&t(c,o)}r&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:n||null});return e}((E=f(),{type:"stylesheet",stylesheet:{source:e.source,rules:E,parsingErrors:s}}))}function b(t){return t?t.replace(/^\s+|\s+$/g,""):""}var w={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};var x=/([^\\]):hover/g;function E(t){var e=g(t,{silent:!0});return e.stylesheet?(e.stylesheet.rules.forEach(function(e){"selectors"in e&&(e.selectors||[]).forEach(function(e){if(x.test(e)){var n=e.replace(x,"$1.\\:hover");t=t.replace(e,e+", "+n)}})}),t):t}function T(t,e){switch(t.type){case r.Document:return e.implementation.createDocument(null,"",null);case r.DocumentType:return e.implementation.createDocumentType(t.name,t.publicId,t.systemId);case r.Element:var n=function(t){var e=w[t.tagName]?w[t.tagName]:t.tagName;return"link"===e&&t.attributes._cssText&&(e="style"),e}(t),o=void 0;for(var i in o=t.isSVG?e.createElementNS("http://www.w3.org/2000/svg",n):e.createElement(n),t.attributes)if(t.attributes.hasOwnProperty(i)&&!i.startsWith("rr_")){var a=t.attributes[i];a="boolean"==typeof a?"":a;var s="textarea"===n&&"value"===i,c="style"===n&&"_cssText"===i;if(c&&(a=E(a)),s||c){for(var u=e.createTextNode(a),l=0,f=Array.from(o.childNodes);l<f.length;l++){var d=f[l];d.nodeType===o.TEXT_NODE&&o.removeChild(d)}o.appendChild(u);continue}if("iframe"===n&&"src"===i)continue;try{t.isSVG&&"xlink:href"===i?o.setAttributeNS("http://www.w3.org/1999/xlink",i,a):o.setAttribute(i,a)}catch(t){}}else t.attributes.rr_width&&(o.style.width=t.attributes.rr_width),t.attributes.rr_height&&(o.style.height=t.attributes.rr_height);return o;case r.Text:return e.createTextNode(t.isStyle?E(t.textContent):t.textContent);case r.CDATA:return e.createCDATASection(t.textContent);case r.Comment:return e.createComment(t.textContent);default:return null}}function C(t,e,n,o){void 0===o&&(o=!1);var i=T(t,e);if(!i)return null;if(t.type===r.Document&&(e.close(),e.open(),i=e),i.__sn=t,n[t.id]=i,(t.type===r.Document||t.type===r.Element)&&!o)for(var a=0,s=t.childNodes;a<s.length;a++){var c=s[a],u=C(c,e,n);u?i.appendChild(u):console.warn("Failed to rebuild",c)}return i}function N(t,e,n){void 0===n&&(n=document);var r={capture:!0,passive:!0};return n.addEventListener(t,e,r),function(){return n.removeEventListener(t,e,r)}}var I,S,k,L,O={map:{},getId:function(t){return t.__sn?t.__sn.id:-1},getNode:function(t){return O.map[t]||null},removeNodeFromMap:function(t){var e=t.__sn&&t.__sn.id;delete O.map[e],t.childNodes&&t.childNodes.forEach(function(t){return O.removeNodeFromMap(t)})},has:function(t){return O.map.hasOwnProperty(t)}};function A(t,e,n){void 0===n&&(n={});var r=null,o=0;return function(i){var a=Date.now();o||!1!==n.leading||(o=a);var s=e-(a-o),c=this,u=arguments;s<=0||s>e?(r&&(window.clearTimeout(r),r=null),o=a,t.apply(c,u)):r||!1===n.trailing||(r=window.setTimeout(function(){o=!1===n.leading?0:Date.now(),r=null,t.apply(c,u)},s))}}function M(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function D(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function _(t,e){if(!t)return!1;if(t.nodeType===t.ELEMENT_NODE){var n=!1;return"string"==typeof e?n=t.classList.contains(e):t.classList.forEach(function(t){e.test(t)&&(n=!0)}),n||_(t.parentNode,e)}return _(t.parentNode,e)}function j(t){return Boolean(t.changedTouches)}function R(){"NodeList"in window&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach)}function P(t,e){t.delete(e),e.childNodes.forEach(function(e){return P(t,e)})}function F(t,e){var n=e.parentNode;return!!n&&(!!t.has(n)||F(t,n))}!function(t){t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom"}(I||(I={})),function(t){t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove"}(S||(S={})),function(t){t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd"}(k||(k={})),function(t){t.Start="start",t.Pause="pause",t.Resume="resume",t.Resize="resize",t.Finish="finish",t.FullsnapshotRebuilded="fullsnapshot-rebuilded",t.LoadStylesheetStart="load-stylesheet-start",t.LoadStylesheetEnd="load-stylesheet-end",t.SkipStart="skip-start",t.SkipEnd="skip-end",t.MouseInteraction="mouse-interaction"}(L||(L={}));var B=function(t,e){return t+"@"+e};function z(t){return"__sn"in t}function X(t,e,n,r){var o=new MutationObserver(function(o){var i=[],a=[],s=[],c=[],u=new Set,l=new Set,f=new Set,d={},p=function(t,n){if(!_(t,e)){if(z(t)){l.add(t);var r=null;n&&z(n)&&(r=n.__sn.id),r&&(d[B(t.__sn.id,r)]=!0)}else u.add(t),f.delete(t);t.childNodes.forEach(function(t){return p(t)})}};o.forEach(function(t){var n=t.type,r=t.target,o=t.oldValue,c=t.addedNodes,h=t.removedNodes,m=t.attributeName;switch(n){case"characterData":var v=r.textContent;_(r,e)||v===o||i.push({value:v,node:r});break;case"attributes":v=r.getAttribute(m);if(_(r,e)||v===o)return;var y=a.find(function(t){return t.node===r});y||(y={node:r,attributes:{}},a.push(y)),y.attributes[m]=v;break;case"childList":c.forEach(function(t){return p(t,r)}),h.forEach(function(t){var n=O.getId(t),o=O.getId(r);_(t,e)||(u.has(t)?(P(u,t),f.add(t)):u.has(r)&&-1===n||function t(e){var n=O.getId(e);return!O.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||t(e.parentNode))}(r)||(l.has(t)&&d[B(n,o)]?P(l,t):s.push({parentId:o,id:n})),O.removeNodeFromMap(t))})}});var h=[],m=function(t){var o=O.getId(t.parentNode);if(-1===o)return h.push(t);c.push({parentId:o,previousId:t.previousSibling?O.getId(t.previousSibling):t.previousSibling,nextId:t.nextSibling?O.getId(t.nextSibling):t.nextSibling,node:v(t,document,O.map,e,!0,n,r)})};for(Array.from(l).forEach(m),Array.from(u).forEach(function(t){F(f,t)||function t(e,n){var r=n.parentNode;if(!r)return!1;var o=O.getId(r);return!!e.some(function(t){return t.id===o})||t(e,r)}(s,t)?F(l,t)?m(t):f.add(t):m(t)});h.length&&!h.every(function(t){return-1===O.getId(t.parentNode)});)m(h.shift());var y={texts:i.map(function(t){return{id:O.getId(t.node),value:t.value}}).filter(function(t){return O.has(t.id)}),attributes:a.map(function(t){return{id:O.getId(t.node),attributes:t.attributes}}).filter(function(t){return O.has(t.id)}),removes:s,adds:c};(y.texts.length||y.attributes.length||y.removes.length||y.adds.length)&&t(y)});return o.observe(document,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function U(t,e){var n=[];return Object.keys(k).filter(function(t){return Number.isNaN(Number(t))&&!t.endsWith("_Departed")}).forEach(function(r){var o=r.toLowerCase(),i=function(n){return function(r){if(!_(r.target,e)){var o=O.getId(r.target),i=j(r)?r.changedTouches[0]:r,a=i.clientX,s=i.clientY;t({type:k[n],id:o,x:a,y:s})}}}(r);n.push(N(o,i))}),function(){n.forEach(function(t){return t()})}}var V,Y=["INPUT","TEXTAREA","SELECT"],G=["color","date","datetime-local","email","month","number","range","search","tel","text","time","url","week"],H=new WeakMap;function W(t,e,n,r){function o(t){var o=t.target;if(o&&o.tagName&&!(Y.indexOf(o.tagName)<0)&&!_(o,e)){var a=o.type;if("password"!==a&&!o.classList.contains(n)){var s=o.value,c=!1,u=G.includes(a)||"TEXTAREA"===o.tagName;"radio"===a||"checkbox"===a?c=o.checked:u&&r&&(s="*".repeat(s.length)),i(o,{text:s,isChecked:c});var l=o.name;"radio"===a&&l&&c&&document.querySelectorAll('input[type="radio"][name="'+l+'"]').forEach(function(t){t!==o&&i(t,{text:t.value,isChecked:!c})})}}}function i(e,n){var r=H.get(e);if(!r||r.text!==n.text||r.isChecked!==n.isChecked){H.set(e,n);var o=O.getId(e);t(c({},n,{id:o}))}}var a=["input","change"].map(function(t){return N(t,o)}),s=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),u=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"]];return s&&s.set&&a.push.apply(a,u.map(function(t){return function t(e,n,r,o){var i=Object.getOwnPropertyDescriptor(e,n);return Object.defineProperty(e,n,o?r:{set:function(t){var e=this;setTimeout(function(){r.set.call(e,t)},0),i&&i.set&&i.set.call(this,t)}}),function(){return t(e,n,i||{},!0)}}(t[0],t[1],{set:function(){o({target:this})}})})),function(){a.forEach(function(t){return t()})}}function q(t){var e,n,r,o,i,a,s=X(t.mutationCb,t.blockClass,t.inlineStylesheet,t.maskAllInputs),c=(e=t.mousemoveCb,r=[],o=A(function(t){var o=Date.now()-n;e(r.map(function(t){return t.timeOffset-=o,t}),t?S.TouchMove:S.MouseMove),r=[],n=null},500),i=A(function(t){var e=t.target,i=j(t)?t.changedTouches[0]:t,a=i.clientX,s=i.clientY;n||(n=Date.now()),r.push({x:a,y:s,id:O.getId(e),timeOffset:Date.now()-n}),o(j(t))},50,{trailing:!1}),a=[N("mousemove",i),N("touchmove",i)],function(){a.forEach(function(t){return t()})}),u=U(t.mouseInteractionCb,t.blockClass),l=function(t,e){return N("scroll",A(function(n){if(n.target&&!_(n.target,e)){var r=O.getId(n.target);if(n.target===document){var o=document.scrollingElement||document.documentElement;t({id:r,x:o.scrollLeft,y:o.scrollTop})}else t({id:r,x:n.target.scrollLeft,y:n.target.scrollTop})}},100))}(t.scrollCb,t.blockClass),f=function(t){return N("resize",A(function(){var e=M(),n=D();t({width:Number(n),height:Number(e)})},200),window)}(t.viewportResizeCb),d=W(t.inputCb,t.blockClass,t.ignoreClass,t.maskAllInputs);return function(){s.disconnect(),c(),u(),l(),f(),d()}}function J(t){return c({},t,{timestamp:Date.now()})}function $(t){void 0===t&&(t={});var e,n=t.emit,r=t.checkoutEveryNms,o=t.checkoutEveryNth,i=t.blockClass,a=void 0===i?"rr-block":i,s=t.ignoreClass,u=void 0===s?"rr-ignore":s,l=t.inlineStylesheet,f=void 0===l||l,d=t.maskAllInputs,p=void 0!==d&&d;if(!n)throw new Error("emit function is required");R();var h=0;function m(t){void 0===t&&(t=!1),V(J({type:I.Meta,data:{href:window.location.href,width:D(),height:M()}}),t);var e=function(t,e,n,r){void 0===e&&(e="rr-block"),void 0===n&&(n=!0),void 0===r&&(r=!1);var o={};return[v(t,t,o,e,!1,n,r),o]}(document,a,f,p),n=e[0],r=e[1];if(!n)return console.warn("Failed to snapshot the document");O.map=r,V(J({type:I.FullSnapshot,data:{node:n,initialOffset:{left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop}}}))}V=function(t,i){if(n(t,i),t.type===I.FullSnapshot)e=t,h=0;else if(t.type===I.IncrementalSnapshot){h++;var a=o&&h>=o,s=r&&t.timestamp-e.timestamp>r;(a||s)&&m(!0)}};try{var y=[];y.push(N("DOMContentLoaded",function(){V(J({type:I.DomContentLoaded,data:{}}))}));var g=function(){m(),y.push(q({mutationCb:function(t){return V(J({type:I.IncrementalSnapshot,data:c({source:S.Mutation},t)}))},mousemoveCb:function(t,e){return V(J({type:I.IncrementalSnapshot,data:{source:e,positions:t}}))},mouseInteractionCb:function(t){return V(J({type:I.IncrementalSnapshot,data:c({source:S.MouseInteraction},t)}))},scrollCb:function(t){return V(J({type:I.IncrementalSnapshot,data:c({source:S.Scroll},t)}))},viewportResizeCb:function(t){return V(J({type:I.IncrementalSnapshot,data:c({source:S.ViewportResize},t)}))},inputCb:function(t){return V(J({type:I.IncrementalSnapshot,data:c({source:S.Input},t)}))},blockClass:a,ignoreClass:u,maskAllInputs:p,inlineStylesheet:f}))};return"interactive"===document.readyState||"complete"===document.readyState?g():y.push(N("load",function(){V(J({type:I.Load,data:{}})),g()},window)),function(){y.forEach(function(t){return t()})}}catch(t){console.warn(t)}}function Z(t){return t=t||Object.create(null),{on:function(e,n){(t[e]||(t[e]=[])).push(n)},off:function(e,n){t[e]&&t[e].splice(t[e].indexOf(n)>>>0,1)},emit:function(e,n){(t[e]||[]).slice().map(function(t){t(n)}),(t["*"]||[]).slice().map(function(t){t(e,n)})}}}$.addCustomEvent=function(t,e){if(!V)throw new Error("please add custom event after start recording");V(J({type:I.Custom,data:{tag:t,payload:e}}))};var K=Object.freeze({default:Z});var Q=function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t,e){t.exports={polyfill:function(){var t=window,e=document;if(!("scrollBehavior"in e.documentElement.style&&!0!==t.__forceSmoothScrollPolyfill__)){var n,r=t.HTMLElement||t.Element,o=468,i={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:r.prototype.scroll||c,scrollIntoView:r.prototype.scrollIntoView},a=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now,s=(n=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(n)?1:0);t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(!0!==u(arguments[0])?m.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):i.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))},t.scrollBy=function(){void 0!==arguments[0]&&(u(arguments[0])?i.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):m.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},r.prototype.scroll=r.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==u(arguments[0])){var t=arguments[0].left,e=arguments[0].top;m.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},r.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==u(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},r.prototype.scrollIntoView=function(){if(!0!==u(arguments[0])){var n=p(this),r=n.getBoundingClientRect(),o=this.getBoundingClientRect();n!==e.body?(m.call(this,n,n.scrollLeft+o.left-r.left,n.scrollTop+o.top-r.top),"fixed"!==t.getComputedStyle(n).position&&t.scrollBy({left:r.left,top:r.top,behavior:"smooth"})):t.scrollBy({left:o.left,top:o.top,behavior:"smooth"})}else i.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function c(t,e){this.scrollLeft=t,this.scrollTop=e}function u(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function l(t,e){return"Y"===e?t.clientHeight+s<t.scrollHeight:"X"===e?t.clientWidth+s<t.scrollWidth:void 0}function f(e,n){var r=t.getComputedStyle(e,null)["overflow"+n];return"auto"===r||"scroll"===r}function d(t){var e=l(t,"Y")&&f(t,"Y"),n=l(t,"X")&&f(t,"X");return e||n}function p(t){for(;t!==e.body&&!1===d(t);)t=t.parentNode||t.host;return t}function h(e){var n,r,i,s,c=(a()-e.startTime)/o;s=c=c>1?1:c,n=.5*(1-Math.cos(Math.PI*s)),r=e.startX+(e.x-e.startX)*n,i=e.startY+(e.y-e.startY)*n,e.method.call(e.scrollable,r,i),r===e.x&&i===e.y||t.requestAnimationFrame(h.bind(t,e))}function m(n,r,o){var s,u,l,f,d=a();n===e.body?(s=t,u=t.scrollX||t.pageXOffset,l=t.scrollY||t.pageYOffset,f=i.scroll):(s=n,u=n.scrollLeft,l=n.scrollTop,f=c),h({scrollable:s,method:f,startTime:d,startX:u,startY:l,x:r,y:o})}}}}).polyfill,tt=function(){function t(t,e){void 0===e&&(e=[]),this.timeOffset=0,this.actions=e,this.config=t}return t.prototype.addAction=function(t){var e=this.findActionIndex(t);this.actions.splice(e,0,t)},t.prototype.addActions=function(t){var e;(e=this.actions).push.apply(e,t)},t.prototype.start=function(){this.actions.sort(function(t,e){return t.delay-e.delay}),this.timeOffset=0;var t=performance.now(),e=this.actions,n=this.config,r=this;this.raf=requestAnimationFrame(function o(i){for(r.timeOffset+=(i-t)*n.speed,t=i;e.length;){var a=e[0];if(!(r.timeOffset>=a.delay))break;e.shift(),a.doAction()}(e.length>0||r.config.liveMode)&&(r.raf=requestAnimationFrame(o))})},t.prototype.clear=function(){this.raf&&cancelAnimationFrame(this.raf),this.actions.length=0},t.prototype.findActionIndex=function(t){for(var e=0,n=this.actions.length-1;e<=n;){var r=Math.floor((e+n)/2);if(this.actions[r].delay<t.delay)e=r+1;else{if(!(this.actions[r].delay>t.delay))return r;n=r-1}}return e},t}(),et=Z||K,nt=(function(){function t(t,e){if(this.events=[],this.emitter=et(),this.baselineTime=0,this.noramlSpeed=-1,this.missingNodeRetryMap={},t.length<2)throw new Error("Replayer need at least 2 events.");this.events=t,this.handleResize=this.handleResize.bind(this);var n={speed:1,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[]};this.config=Object.assign({},n,e),this.timer=new tt(this.config),Q(),R(),this.setupDom(),this.emitter.on("resize",this.handleResize)}t.prototype.on=function(t,e){this.emitter.on(t,e)},t.prototype.setConfig=function(t){var e=this;Object.keys(t).forEach(function(n){e.config[n]=t[n]}),this.config.skipInactive||(this.noramlSpeed=-1)},t.prototype.getMetaData=function(){var t=this.events[0];return{totalTime:this.events[this.events.length-1].timestamp-t.timestamp}},t.prototype.getCurrentTime=function(){return this.timer.timeOffset+this.getTimeOffset()},t.prototype.getTimeOffset=function(){return this.baselineTime-this.events[0].timestamp},t.prototype.play=function(t){void 0===t&&(t=0),this.timer.clear(),this.baselineTime=this.events[0].timestamp+t;for(var e=new Array,n=0,r=this.events;n<r.length;n++){var o=r[n],i=o.timestamp<this.baselineTime,a=this.getCastFn(o,i);i?a():e.push({doAction:a,delay:this.getDelay(o)})}this.timer.addActions(e),this.timer.start(),this.emitter.emit(L.Start)},t.prototype.pause=function(){this.timer.clear(),this.emitter.emit(L.Pause)},t.prototype.resume=function(t){void 0===t&&(t=0),this.timer.clear(),this.baselineTime=this.events[0].timestamp+t;for(var e=new Array,n=0,r=this.events;n<r.length;n++){var o=r[n];if(!(o.timestamp<=this.lastPlayedEvent.timestamp||o===this.lastPlayedEvent)){var i=this.getCastFn(o);e.push({doAction:i,delay:this.getDelay(o)})}}this.timer.addActions(e),this.timer.start(),this.emitter.emit(L.Resume)},t.prototype.addEvent=function(t){this.getCastFn(t,!0)()},t.prototype.setupDom=function(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),this.iframe=document.createElement("iframe"),this.iframe.setAttribute("sandbox","allow-same-origin"),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("style","pointer-events: none"),this.wrapper.appendChild(this.iframe)},t.prototype.handleResize=function(t){this.iframe.width=t.width+"px",this.iframe.height=t.height+"px"},t.prototype.getDelay=function(t){if(t.type===I.IncrementalSnapshot&&t.data.source===S.MouseMove){var e=t.data.positions[0].timeOffset,n=t.timestamp+e;return t.delay=n-this.baselineTime,n-this.baselineTime}return t.delay=t.timestamp-this.baselineTime,t.timestamp-this.baselineTime},t.prototype.getCastFn=function(t,e){var n,r=this;switch(void 0===e&&(e=!1),t.type){case I.DomContentLoaded:case I.Load:break;case I.Meta:n=function(){return r.emitter.emit(L.Resize,{width:t.data.width,height:t.data.height})};break;case I.FullSnapshot:n=function(){r.rebuildFullSnapshot(t),r.iframe.contentWindow.scrollTo(t.data.initialOffset)};break;case I.IncrementalSnapshot:n=function(){if(r.applyIncremental(t,e),t===r.nextUserInteractionEvent&&(r.nextUserInteractionEvent=null,r.restoreSpeed()),r.config.skipInactive&&!r.nextUserInteractionEvent){for(var n=0,o=r.events;n<o.length;n++){var i=o[n];if(!(i.timestamp<=t.timestamp)&&r.isUserInteraction(i)){i.delay-t.delay>1e4*r.config.speed&&(r.nextUserInteractionEvent=i);break}}if(r.nextUserInteractionEvent){r.noramlSpeed=r.config.speed;var a=r.nextUserInteractionEvent.delay-t.delay,s={speed:Math.min(Math.round(a/5e3),360)};r.setConfig(s),r.emitter.emit(L.SkipStart,s)}}}}return function(){n&&n(),r.lastPlayedEvent=t,t===r.events[r.events.length-1]&&(r.restoreSpeed(),r.emitter.emit(L.Finish))}},t.prototype.rebuildFullSnapshot=function(t){var e,n,r;Object.keys(this.missingNodeRetryMap).length&&console.warn("Found unresolved missing node map",this.missingNodeRetryMap),this.missingNodeRetryMap={},O.map=(e=t.data.node,n=this.iframe.contentDocument,r={},[C(e,n,r),r])[1];var o=document.createElement("style"),i=this.iframe.contentDocument,a=i.documentElement,s=i.head;a.insertBefore(o,s);for(var c,u=(c=this.config.blockClass,["iframe, ."+c+" { background: #ccc }","noscript { display: none !important; }"]).concat(this.config.insertStyleRules),l=0;l<u.length;l++)o.sheet.insertRule(u[l],l);this.emitter.emit(L.FullsnapshotRebuilded),this.waitForStylesheetLoad()},t.prototype.waitForStylesheetLoad=function(){var t=this,e=this.iframe.contentDocument.head;if(e){var n,r=new Set;e.querySelectorAll('link[rel="stylesheet"]').forEach(function(e){e.sheet||(0===r.size&&(t.pause(),t.emitter.emit(L.LoadStylesheetStart),n=window.setTimeout(function(){t.resume(t.getCurrentTime()),n=-1},t.config.loadTimeout)),r.add(e),e.addEventListener("load",function(){r.delete(e),0===r.size&&-1!==n&&(t.resume(t.getCurrentTime()),t.emitter.emit(L.LoadStylesheetEnd),n&&window.clearTimeout(n))}))})}},t.prototype.applyIncremental=function(t,e){var n=this,r=t.data;switch(r.source){case S.Mutation:r.removes.forEach(function(t){var e=O.getNode(t.id);if(!e)return n.warnNodeNotFound(r,t.id);var o=O.getNode(t.parentId);if(!o)return n.warnNodeNotFound(r,t.parentId);O.removeNodeFromMap(e),o&&o.removeChild(e)});var o=c({},this.missingNodeRetryMap),i=[],a=function(t){var e=O.getNode(t.parentId);if(!e)return i.push(t);var r=C(t.node,n.iframe.contentDocument,O.map,!0),a=null,s=null;t.previousId&&(a=O.getNode(t.previousId)),t.nextId&&(s=O.getNode(t.nextId)),-1!==t.previousId&&-1!==t.nextId?(a&&a.nextSibling&&a.nextSibling.parentNode?e.insertBefore(r,a.nextSibling):s&&s.parentNode?e.insertBefore(r,s):e.appendChild(r),(t.previousId||t.nextId)&&n.resolveMissingNode(o,e,r,t)):o[t.node.id]={node:r,mutation:t}};for(r.adds.forEach(function(t){a(t)});i.length;){if(i.every(function(t){return!Boolean(O.getNode(t.parentId))}))return i.forEach(function(t){return n.warnNodeNotFound(r,t.node.id)});var s=i.shift();a(s)}Object.keys(o).length&&Object.assign(this.missingNodeRetryMap,o),r.texts.forEach(function(t){var e=O.getNode(t.id);if(!e)return n.warnNodeNotFound(r,t.id);e.textContent=t.value}),r.attributes.forEach(function(t){var e=O.getNode(t.id);if(!e)return n.warnNodeNotFound(r,t.id);for(var o in t.attributes)if("string"==typeof o){var i=t.attributes[o];null!==i?e.setAttribute(o,i):e.removeAttribute(o)}});break;case S.MouseMove:if(e){var u=r.positions[r.positions.length-1];this.moveAndHover(r,u.x,u.y,u.id)}else r.positions.forEach(function(e){var o={doAction:function(){n.moveAndHover(r,e.x,e.y,e.id)},delay:e.timeOffset+t.timestamp-n.baselineTime};n.timer.addAction(o)});break;case S.MouseInteraction:if(-1===r.id)break;var l=new Event(k[r.type].toLowerCase());if(!(f=O.getNode(r.id)))return this.debugNodeNotFound(r,r.id);switch(this.emitter.emit(L.MouseInteraction,{type:r.type,target:f}),r.type){case k.Blur:f.blur&&f.blur();break;case k.Focus:f.focus&&f.focus({preventScroll:!0});break;case k.Click:case k.TouchStart:case k.TouchEnd:e||(this.moveAndHover(r,r.x,r.y,r.id),this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active"));break;default:f.dispatchEvent(l)}break;case S.Scroll:if(-1===r.id)break;if(!(f=O.getNode(r.id)))return this.debugNodeNotFound(r,r.id);if(f===this.iframe.contentDocument)this.iframe.contentWindow.scrollTo({top:r.y,left:r.x,behavior:e?"auto":"smooth"});else try{f.scrollTop=r.y,f.scrollLeft=r.x}catch(t){}break;case S.ViewportResize:this.emitter.emit(L.Resize,{width:r.width,height:r.height});break;case S.Input:if(-1===r.id)break;var f;if(!(f=O.getNode(r.id)))return this.debugNodeNotFound(r,r.id);try{f.checked=r.isChecked,f.value=r.text}catch(t){}}},t.prototype.resolveMissingNode=function(t,e,n,r){var o=r.previousId,i=r.nextId,a=o&&t[o],s=i&&t[i];if(a){var c=a,u=c.node,l=c.mutation;e.insertBefore(u,n),delete t[l.node.id],delete this.missingNodeRetryMap[l.node.id],(l.previousId||l.nextId)&&this.resolveMissingNode(t,e,u,l)}if(s){var f=s;u=f.node,l=f.mutation;e.insertBefore(u,n.nextSibling),delete t[l.node.id],delete this.missingNodeRetryMap[l.node.id],(l.previousId||l.nextId)&&this.resolveMissingNode(t,e,u,l)}},t.prototype.moveAndHover=function(t,e,n,r){this.mouse.style.left=e+"px",this.mouse.style.top=n+"px";var o=O.getNode(r);if(!o)return this.debugNodeNotFound(t,r);this.hoverElements(o)},t.prototype.hoverElements=function(t){this.iframe.contentDocument.querySelectorAll(".\\:hover").forEach(function(t){t.classList.remove(":hover")});for(var e=t;e;)e.classList.add(":hover"),e=e.parentElement},t.prototype.isUserInteraction=function(t){return t.type===I.IncrementalSnapshot&&(t.data.source>S.Mutation&&t.data.source<=S.Input)},t.prototype.restoreSpeed=function(){if(-1!==this.noramlSpeed){var t={speed:this.noramlSpeed};this.setConfig(t),this.emitter.emit(L.SkipEnd,t),this.noramlSpeed=-1}},t.prototype.warnNodeNotFound=function(t,e){this.config.showWarning&&console.warn("[replayer]","Node with id '"+e+"' not found in",t)},t.prototype.debugNodeNotFound=function(t,e){this.config.showDebug&&console.log("[replayer]","Node with id '"+e+"' not found in",t)}}(),$.addCustomEvent,n(2)),rt=n.n(nt),ot=n(3),it=n.n(ot),at=n(4),st=n.n(at),ct=n(5),ut=n.n(ct),lt="/cart",ft=".js",dt="/update.js",pt="/change.js",ht="/clear.js";function mt(t,e){var n=t[t.length-1];return{events:t,timestamp:Date.now(),shop:Shopify.shop,id:e.id,sessionDuration:(n.timestamp-e.startTime)/1e3,lastTotalCartPrice:e.lastTotalCartPrice,lastItemCount:e.lastItemCount,maxTotalCartPrice:e.maxTotalCartPrice,maxItemCount:e.maxItemCount}}function vt(t,e){fetch("".concat("https://rewind-app.now.sh/api").concat(t),{method:"POST",body:JSON.stringify(e)})}function yt(t){return!(!t.includes(lt)||!(t.endsWith(ft)||t.endsWith(dt)||t.endsWith(pt)||t.endsWith(ht)))}function gt(t){!function(t){var e=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){this.addEventListener("readystatechange",function(){yt(this.responseURL)&&4===this.readyState&&t(this)},!1),e.apply(this,arguments)}}(t),function(t){var e=window.fetch;window.fetch=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=s()(i.a.mark(function n(r){var o;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.apply(void 0,ut()(r));case 2:return yt((o=n.sent).url)&&t(o.clone()),n.abrupt("return",o);case 5:case"end":return n.stop()}},n,this)})),function(t){return a.apply(this,arguments)})(r);var a}}(t)}function bt(t){var e,n;e="/sessions",n=t,navigator.sendBeacon("".concat("https://rewind-app.now.sh/api").concat(e),JSON.stringify(n))}var wt=function(){var t,e,n="test";try{return(t=window.localStorage).setItem(n,n),e=t.getItem(n)===n,t.removeItem(n),e&&localStorage}catch(t){return}}();function xt(t){return null==t||isNaN(t)}var Et=3e3,Tt=100,Ct=500,Nt=new(function(){function t(){rt()(this,t),this.updateUUIDAndLastActive(),this.lastTotalCartPrice=xt(this.lastTotalCartPrice)?0:this.lastTotalCartPrice,this.lastItemCount=xt(this.lastItemCount)?0:this.lastItemCount,this.maxTotalCartPrice=xt(this.maxTotalCartPrice)?0:this.maxTotalCartPrice,this.maxItemCount=xt(this.maxItemCount)?0:this.maxItemCount}return it()(t,[{key:"updateCartData",value:function(t,e){isNaN(t)||isNaN(e)||(this.lastItemCount=e,this.lastTotalCartPrice=t,this.maxItemCount=Math.max(e,this.maxItemCount),this.maxTotalCartPrice=Math.max(t,this.maxTotalCartPrice))}},{key:"updateUUIDAndLastActive",value:function(){this.isNewSession()&&(this.id=st()()),this.lastActive=Date.now()}},{key:"isNewSession",value:function(){var t=this.lastActive,e=Date.now();return!t||(e-t)/1e3/60>=30}},{key:"maxItemCount",get:function(){return wt.getItem("max-item-count")},set:function(t){wt.setItem("max-item-count",t)}},{key:"maxTotalCartPrice",get:function(){return wt.getItem("max-total-cart-price")},set:function(t){wt.setItem("max-total-cart-price",t)}},{key:"lastItemCount",get:function(){return wt.getItem("last-item-count")},set:function(t){wt.setItem("last-item-count",t)}},{key:"lastTotalCartPrice",get:function(){return wt.getItem("last-total-cart-price")},set:function(t){wt.setItem("last-total-cart-price",t)}},{key:"startTime",get:function(){return wt.getItem("session-start-time")},set:function(t){wt.setItem("session-start-time",t)}},{key:"lastActive",get:function(){return wt.getItem("session-last-active")},set:function(t){wt.setItem("session-last-active",t)}},{key:"id",get:function(){return wt.getItem("session-id")},set:function(t){wt.setItem("session-id",t)}}]),t}()),It=[];function St(){if(0!==It.length){var t=mt(It,Nt);It=[],function(t){vt("/sessions",t)}(t)}}function kt(t){var e=t.total_price,n=t.item_count;Nt.updateCartData(e,n)}function Lt(t){return Ot.apply(this,arguments)}function Ot(){return(Ot=s()(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e instanceof XMLHttpRequest)){t.next=4;break}kt(JSON.parse(e.response)),t.next=10;break;case 4:if(!(e instanceof Response)){t.next=10;break}return t.t0=kt,t.next=8,e.json();case 8:t.t1=t.sent,(0,t.t0)(t.t1);case 10:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}wt&&navigator&&navigator.sendBeacon&&(window.LOOPR_ENABLED||(!function t(){"undefined"!=typeof Shopify?(vt("/customers",{id:Nt.id,shop:Shopify.shop}),gt(Lt),$({emit:function(t){It.push(t),Nt.startTime||(Nt.startTime=t.timestamp),(It.length>Tt||2===t.type)&&St()}}),setInterval(function(){Nt.updateUUIDAndLastActive(),St()},Et),window.addEventListener("unload",function(){0!==It.length&&bt(mt(It,Nt))},!1)):setTimeout(t,Ct)}(),window.LOOPR_ENABLED=!0))}])});
//# sourceMappingURL=br.min.js.map